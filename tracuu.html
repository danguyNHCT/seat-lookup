<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tra cứu mã số ghế ngồi</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(rgba(245, 240, 220, 0.9), rgba(245, 240, 220, 0.9)), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><defs><pattern id="vintage" patternUnits="userSpaceOnUse" width="100" height="100"><rect width="100" height="100" fill="%23f5f0dc"/><path d="M0 0h100v100H0z" fill="none" stroke="%23ddd" stroke-width="0.5" opacity="0.3"/><circle cx="20" cy="20" r="1" fill="%23d4c5a9" opacity="0.4"/><circle cx="80" cy="30" r="0.5" fill="%23d4c5a9" opacity="0.3"/><circle cx="50" cy="70" r="1.5" fill="%23d4c5a9" opacity="0.2"/><circle cx="10" cy="80" r="0.8" fill="%23d4c5a9" opacity="0.3"/><circle cx="90" cy="15" r="0.3" fill="%23d4c5a9" opacity="0.4"/><path d="M10 50c20-5 40 5 60-10" stroke="%23ddd" stroke-width="0.3" fill="none" opacity="0.2"/><path d="M20 80c15-8 35 3 50-5" stroke="%23ddd" stroke-width="0.2" fill="none" opacity="0.3"/></pattern></defs><rect width="100" height="100" fill="url(%23vintage)"/></svg>');
            background-size: 150px 150px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(210, 180, 140, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(205, 175, 135, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 20%, rgba(215, 185, 145, 0.08) 0%, transparent 40%);
            pointer-events: none;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 
                0 20px 60px rgba(139, 115, 85, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            max-width: 500px;
            width: 100%;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(139, 115, 85, 0.2);
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #D2691E, #CD853F, #DEB887, #F4A460);
        }
        
        .header {
            margin-bottom: 40px;
        }
        h1 {
            color: rgb(0, 89, 147);
            margin: 0 0 10px 0;
            font-size: 32px;
            font-weight: 700;
            text-shadow: 1px 1px 3px rgba(139, 115, 85, 0.2);
        }
        .subtitle {
            color: #666;
            font-size: 16px;
            margin: 0;
            font-weight: 400;
        }
        .search-section {
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 25px;
            text-align: left;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 16px;
        }
        .input-container {
            position: relative;
        }
        input[type="email"] {
            width: 100%;
            padding: 18px 100px 18px 20px;
            border: 2px solid rgba(139, 115, 85, 0.3);
            border-radius: 12px;
            font-size: 16px;
            box-sizing: border-box;
            transition: all 0.3s ease;
            background-color: rgba(250, 245, 235, 0.8);
            font-weight: 400;
        }
        input[type="email"]:focus {
            border-color: #4ECDC4;
            outline: none;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.2);
        }
        .input-actions {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 5px;
        }
        .input-icon {
            color: #999;
            font-size: 20px;
            padding: 5px;
        }
        .clear-btn {
            background: rgba(255, 107, 107, 0.1);
            color: #ff6b6b;
            border: none;
            border-radius: 8px;
            padding: 8px 10px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: none;
        }
        .clear-btn:hover {
            background: rgba(255, 107, 107, 0.2);
            transform: scale(1.05);
        }
        .search-btn {
            background: rgb(126, 211, 247);
            color: rgb(0, 89, 147);
            padding: 18px 40px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s ease;
            margin-top: 10px;
            box-shadow: 0 4px 15px rgba(126, 211, 247, 0.3);
        }
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(126, 211, 247, 0.4);
        }
        .search-btn:active {
            transform: translateY(0);
        }
        .result {
            margin-top: 25px;
            padding: 25px;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 600;
            animation: slideIn 0.5s ease;
            backdrop-filter: blur(5px);
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .success {
            background: linear-gradient(45deg, rgba(212, 237, 218, 0.9), rgba(195, 230, 203, 0.9));
            color: #155724;
            border: 2px solid rgba(184, 230, 192, 0.8);
        }
        .error {
            background: linear-gradient(45deg, rgba(248, 215, 218, 0.9), rgba(245, 198, 203, 0.9));
            color: #721c24;
            border: 2px solid rgba(241, 174, 181, 0.8);
        }
        .info {
            background: linear-gradient(45deg, rgba(209, 236, 241, 0.9), rgba(190, 229, 235, 0.9));
            color: #0c5460;
            border: 2px solid rgba(166, 213, 219, 0.8);
        }
        .warning {
            background: linear-gradient(45deg, rgba(255, 243, 205, 0.9), rgba(255, 234, 167, 0.9));
            color: #856404;
            border: 2px solid rgba(255, 211, 42, 0.8);
        }
        .seat-code {
            font-size: 72px;
            font-weight: 800;
            color: rgb(0, 89, 147);
            margin: 15px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .seat-code.vip {
            color: #d4af37;
            text-shadow: 2px 2px 4px rgba(212, 175, 55, 0.3);
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4ECDC4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .email-suggestion {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 15px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            border: 1px solid rgba(139, 115, 85, 0.2);
            transition: all 0.3s ease;
        }
        
        .email-suggestion:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(139, 115, 85, 0.1);
        }
        
        .email-text {
            flex: 1;
            text-align: left;
            font-size: 14px;
            color: #333;
            margin-right: 10px;
        }
        
        .copy-btn {
            background: rgba(78, 205, 196, 0.1);
            color: #4ECDC4;
            border: 1px solid rgba(78, 205, 196, 0.3);
            border-radius: 6px;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .copy-btn:hover {
            background: rgba(78, 205, 196, 0.2);
            transform: scale(1.05);
        }
        
        .copy-btn:active {
            transform: scale(0.95);
        }
        
        .suggestions-container {
            margin-top: 15px;
        }
        
        /* Mobile responsive */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 30px 20px;
            }
            h1 {
                font-size: 28px;
            }
            .seat-code {
                font-size: 56px;
            }
            input[type="email"] {
                padding: 16px 90px 16px 18px;
                font-size: 14px;
            }
            .email-suggestion {
                padding: 8px 12px;
            }
            .email-text {
                font-size: 13px;
            }
            .copy-btn {
                padding: 4px 8px;
                font-size: 11px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎫 TRA CỨU MÃ SỐ GHẾ NGỒI</h1>
            <p class="subtitle">Nhập email để xem mã ghế đại biểu tham dự đại hội</p>
        </div>
        
        <div class="search-section">
            <div class="form-group">
                <label for="email">📧 Email của đại biểu:</label>
                <div class="input-container">
                    <input type="email" id="email" placeholder="Nhập userAD@vietinbank.vn hoặc email công ty con" required autocomplete="email">
                    <div class="input-actions">
                        <button class="clear-btn" id="clearBtn" onclick="clearEmail()">✕</button>
                        <span class="input-icon">@</span>
                    </div>
                </div>
            </div>
            
            <button class="search-btn" onclick="lookupSeat()" id="searchBtn">
                🔍 Tra cứu ngay
            </button>
        </div>
        
        <div id="result"></div>
    </div>

    <script>
        // 📊 DỮ LIỆU GHẾ NGỒI - DEMO DATA
        const SEAT_DATA = {
           "binhtm@vietinbank.vn": "VIP",
            "cuongtk@vietinbank.vn": "VIP",
            "trungntm@vietinbank.vn": "VIP",
            "tan.tv@vietinbank.vn": "VIP",
            "huannt@vietinbank.vn": "VIP",
            "dungnv7@vietinbank.vn": "VIP",
            "haild@vietinbank.vn": "VIP",
            "dtson@vietinbank.vn": "VIP",
            "quandv@vietinbank.vn": "VIP",
            "giangnq@vietinbank.vn": "VIP",
            "hoaiptt@vietinbank.vn": "VIP",
            "lethanhtung@vietinbank.vn": "VIP",
            "hala@vietinbank.vn": "VIP",
            "hoaln@vietinbank.vn": "VIP",
            "nguyenducthanh@vietinbank.vn": "VIP",
            "vannbt@vietinbank.vn": "VIP",
            "lantcq@vietinbank.vn": "VIP",
            "hung.nh@vietinbank.vn": "VIP",
            "thaolt2@vietinbank.vn": "VIP",
            "phuonglt106@vietinbank.vn": "VIP",
            "huongdtk@vietinbank.vn": "VIP",
            "tuyendx@vietinbank.vn": "VIP",
            "nttung@vietinbank.vn": "VIP",
            "duclv@vietinbank.vn": "VIP",
            "ng.a.tuan@vietinbank.vn": "VIP",
            "lanlp@vietinbank.vn": "VIP",
            "huonglm@vietinbank.vn": "VIP",
            "nt.hoa@vietinbank.vn": "VIP",
            "huongnguyen@vietinbank.vn": "VIP",
            "vyvt@vietinbank.vn": "VIP",
            "nghia.dt@vietinbank.vn": "VIP",
            "quydt@vietinbank.vn": "VIP",
            "tiendh@vietinbank.vn": "VIP",
            "vunx@vietinbank.vn": "VIP",
            "nh.quang@myvbi.vn": "VIP",
            "hungla@vietinbank.vn": "VIP",
            "duc.tm@vietinbank.vn": "37",
            "nmtoan@vietinbank.vn": "38",
            "thanhptn@vietinbank.vn": "39",
            "nguyenthanh.hung@vietinbank.vn": "40",
            "dung.nguyenthai@vietinbank.vn": "41",
            "thangnt2@vietinbank.vn": "42",
            "ngandtk@vietinbank.vn": "43",
            "thaidh@vietinbank.vn": "44",
            "trangbt@vietinbank.vn": "45",
            "tt.thuhuyen@vietinbank.vn": "46",
            "th.nam@vietinbank.vn": "47",
            "tuctt@vietinbank.vn": "48",
            "hienhtt@vietinbank.vn": "49",
            "nguyenthuy.duong@vietinbank.vn": "50",
            "haqtt@vietinbank.vn": "51",
            "xuanptt@vietinbank.vn": "52",
            "binhtq@vietinbank.vn": "53",
            "hang.phamthi@vietinbank.vn": "54",
            "thuybtt@vietinbank.vn": "55",
            "khuepb@vietinbank.vn": "56",
            "thinhnt@vietinbank.vn": "57",
            "chauth@vietinbank.vn": "58",
            "anhnh@vietinbank.vn": "59",
            "truonghx@vietinbank.vn": "60",
            "thanhxuannguyen@vietinbank.vn": "61",
            "quangtd1@vietinbank.vn": "62",
            "tm.hoang@vietinbank.vn": "63",
            "phuongnm@vietinbank.vn": "64",
            "halt@vietinbank.vn": "65",
            "hant1@vietinbank.vn": "66",
            "anh.tt@vietinbank.vn": "67",
            "hiepnsn@vietinbank.vn": "68",
            "xuanbtt@myvbi.vn": "69",
            "dungtt@myvbi.vn": "70",
            "hoaltq@myvbi.vn": "71",
            "phantiendung@vietinbank.vn": "72",
            "vinhtp@cts.vn": "73",
            "luatld@vietinbankamc.vn": "74",
            "tuongnq@vietinbankleasing.vn": "75",
            "diep.pth@vietinbankgold.vn": "76",
            "ducnh@vietinbankcapital.vn": "77",
            "maittt@vietinbank.vn": "78",
            "haocv@vietinbank.vn": "79",
            "ngocpl@vietinbank.vn": "80",
            "nhung.vtt@vietinbank.vn": "81",
            "diepln@vietinbank.vn": "82",
            "trangntv@vietinbank.vn": "83",
            "yen.lethihai@vietinbank.vn": "84",
            "duong.nn@vietinbank.vn": "85",
            "linh.lt@vietinbank.vn": "86",
            "hiendtt@vietinbank.vn": "87",
            "tung.nguyenthanh@vietinbank.vn": "88",
            "pt.thang@vietinbank.vn": "89",
            "nhanpt@vietinbank.vn": "90",
            "nguyenthithu.huyen@vietinbank.vn": "91",
            "longch@vietinbank.vn": "92",
            "lien.nth@vietinbank.vn": "93",
            "dtanh@vietinbank.vn": "94",
            "mai.lt@vietinbank.vn": "95",
            "haibm@vietinbank.vn": "96",
            "ntb.hanh@vietinbank.vn": "97",
            "dqtrung@vietinbank.vn": "98",
            "linhtt@vietinbank.vn": "99",
            "nhandth@vietinbank.vn": "100",
            "tuelv@vietinbank.vn": "101",
            "sontt@vietinbank.vn": "102",
            "nd.hung@vietinbank.vn": "103",
            "dtthang@vietinbank.vn": "104",
            "quannh6@vietinbank.vn": "105",
            "daonta@vietinbank.vn": "106",
            "hue.nguyenthi@vietinbank.vn": "107",
            "gianglv@vietinbank.vn": "108",
            "quandm@vietinbank.vn": "109",
            "giangdh@vietinbank.vn": "110",
            "thunv2@vietinbank.vn": "111",
            "phamthi.thuy@vietinbank.vn": "112",
            "loi.nv@vietinbank.vn": "113",
            "nguyenthikim.thanh@vietinbank.vn": "114",
            "tuan.nt@vietinbank.vn": "115",
            "leht@vietinbank.vn": "116",
            "tuanna180@vietinbank.vn": "117",
            "dt.nguyen@vietinbank.vn": "118",
            "hung.vv@vietinbank.vn": "119",
            "vuht@vietinbank.vn": "120",
            "bac.tv@vietinbank.vn": "121",
            "tuongnb@vietinbank.vn": "122",
            "nguyen.thuy.hang@vietinbank.vn": "123",
            "van.dtt@vietinbank.vn": "124",
            "huy.nd@vietinbank.vn": "125",
            "haotq@vietinbank.vn": "126",
            "ng.thithu@vietinbank.vn": "127",
            "nhquan@vietinbank.vn": "128",
            "phuong.pv@vietinbank.vn": "129",
            "ducnd@vietinbank.vn": "130",
            "ntmphuong@vietinbank.vn": "131",
            "dovan.phi@vietinbank.vn": "132",
            "thuanpd@vietinbank.vn": "133",
            "cannq@vietinbank.vn": "134",
            "nv.tan@vietinbank.vn": "135",
            "haipn@vietinbank.vn": "136",
            "kien.nguyentrung@vietinbank.vn": "137",
            "ducnv@vietinbank.vn": "138",
            "duynq@vietinbank.vn": "139",
            "tho.nh@vietinbank.vn": "140",
            "nk.hieu@vietinbank.vn": "141",
            "nguyen.tuyet@vietinbank.vn": "142",
            "hastt@vietinbank.vn": "143",
            "truong.nv@vietinbank.vn": "144",
            "phuong.nguyenviet@vietinbank.vn": "145",
            "phonghx@vietinbank.vn": "146",
            "son.tq@vietinbank.vn": "147",
            "thanvan.hung@vietinbank.vn": "148",
            "tienpd@vietinbank.vn": "149",
            "nthihuong@vietinbank.vn": "150",
            "nguyentuancuong@vietinbank.vn": "151",
            "dungpa@vietinbank.vn": "152",
            "quangth@vietinbank.vn": "153",
            "huyenlb@vietinbank.vn": "154",
            "n.anhtuan@vietinbank.vn": "155",
            "phuongnt3@vietinbank.vn": "156",
            "vinhdm@vietinbank.vn": "157",
            "nguyenquanghung@vietinbank.vn": "158",
            "khangnv@vietinbank.vn": "159",
            "anhnkd@vietinbank.vn": "160",
            "viet.lt@vietinbank.vn": "161",
            "tuyen.lh@vietinbank.vn": "162",
            "lethemanh@vietinbank.vn": "163",
            "thuynt22@vietinbank.vn": "164",
            "quyenlx@vietinbank.vn": "165",
            "linh.nguyenthimy@vietinbank.vn": "166",
            "ngactb@vietinbank.vn": "167",
            "anh.tn@vietinbank.vn": "168",
            "anh.td@vietinbank.vn": "169",
            "truong.nv2@vietinbank.vn": "170",
            "nguyenquang.tam@vietinbank.vn": "171",
            "tienpv@vietinbank.vn": "172",
            "thiennq@vietinbank.vn": "173",
            "vietpt@vietinbank.vn": "174",
            "thuy.do@vietinbank.vn": "175",
            "sondn@vietinbank.vn": "176",
            "haidv@vietinbank.vn": "177",
            "chungdq@vietinbank.vn": "178",
            "vth.nhung@vietinbank.vn": "179",
            "duy.nq@vietinbank.vn": "180",
            "hungnd@vietinbank.vn": "181",
            "thangdx@vietinbank.vn": "182",
            "lyhoang.ha@vietinbank.vn": "183",
            "hung.nguyenhuy@vietinbank.vn": "184",
            "nampv@vietinbank.vn": "185",
            "thaomtp@vietinbank.vn": "186",
            "thinh.td@vietinbank.vn": "187",
            "thiennv@vietinbank.vn": "188",
            "levan.dung@vietinbank.vn": "189",
            "dung.pv@vietinbank.vn": "190",
            "cuongtxg@vietinbank.vn": "191",
            "quynhltn@vietinbank.vn": "192",
            "namth@vietinbank.vn": "193",
            "thuynguyen@vietinbank.vn": "194",
            "phucbx@vietinbank.vn": "195",
            "dongbx@vietinbank.vn": "196",
            "binh.nguyenvan@vietinbank.vn": "197",
            "tandm@vietinbank.vn": "198",
            "kienlk@vietinbank.vn": "199",
            "dinhn@vietinbank.vn": "200",
            "thanhtq@vietinbank.vn": "201",
            "huonglpq@vietinbank.vn": "202",
            "ttt.thanh@vietinbank.vn": "203",
            "hadv@vietinbank.vn": "204",
            "minh.pt@vietinbank.vn": "205",
            "tuananh.nguyen@vietinbank.vn": "206",
            "donglt@vietinbank.vn": "207",
            "hanhttm@vietinbank.vn": "208",
            "nguyenthi.nga@vietinbank.vn": "209",
            "vinhnt9@vietinbank.vn": "210",
            "nhadx@vietinbank.vn": "211",
            "thinhdq@vietinbank.vn": "212",
            "hao.ntt@vietinbank.vn": "213",
            "donglp@vietinbank.vn": "214",
            "hoang.tung@vietinbank.vn": "215",
            "quyennqa@vietinbank.vn": "216",
            "nvtoan@vietinbank.vn": "217",
            "hthang@vietinbank.vn": "218",
            "nguyencu@vietinbank.vn": "219",
            "thuy.dt@vietinbank.vn": "220",
            "anh.vh@vietinbank.vn": "221",
            "honghd@vietinbank.vn": "222",
            "huongbtx@vietinbank.vn": "223",
            "ngocnn@vietinbank.vn": "224",
            "minhpc@vietinbank.vn": "225",
            "minhha@vietinbank.vn": "226",
            "phuong.dtb@vietinbank.vn": "227",
            "vietnt@vietinbank.vn": "228",
            "phucndq@vietinbank.vn": "229",
            "dung.htk@vietinbank.vn": "230",
            "chinhtv@vietinbank.vn": "231",
            "khanhbb@vietinbank.vn": "232",
            "vu.trung.thanh@vietinbank.vn": "233",
            "nv.chau@vietinbank.vn": "234",
            "leptd@vietinbank.vn": "235",
            "ng.thang@vietinbank.vn": "236",
            "tung.vt@vietinbank.vn": "237",
            "trinhbd@vietinbank.vn": "238",
            "locpt@vietinbank.vn": "239",
            "khanh.lh@vietinbank.vn": "240",
            "hung.nguyenthanh@vietinbank.vn": "241",
            "hauvp@vietinbank.vn": "242",
            "phuoclt@vietinbank.vn": "243",
            "trungtm@vietinbank.vn": "244",
            "kinhbt@vietinbank.vn": "245",
            "tt.toan@vietinbank.vn": "246",
            "thuy.tran@vietinbank.vn": "247",
            "truongnt@vietinbank.vn": "248",
            "trananhtuanlong@vietinbank.vn": "249",
            "tungvt@vietinbank.vn": "250",
            "luatnt@vietinbank.vn": "251",
            "trung.nh@vietinbank.vn": "252",
            "nh.phuc@vietinbank.vn": "253",
            "truong.ln@vietinbank.vn": "254",
            "anntt2@vietinbank.vn": "255",
            "khalm@vietinbank.vn": "256",
            "phamkeanh@vietinbank.vn": "257",
            "tanmt@vietinbank.vn": "258",
            "tunguyen@vietinbank.vn": "259",
            "nm.ha@vietinbank.vn": "260",
            "habtt@vietinbank.vn": "261",
            "nghiaht@vietinbank.vn": "262",
            "tuyenph@vietinbank.vn": "263",
            "thuptn@vietinbank.vn": "264",
            "dunglv@vietinbank.vn": "265",
            "haolv@vietinbank.vn": "266",
            "hanhdm@vietinbank.vn": "267",
            "nguyen.thi.haiyen@vietinbank.vn": "268",
            "hungnk@vietinbank.vn": "269",
            "quang.tx@vietinbank.vn": "270",
            "thanh.ptv@vietinbank.vn": "271",
            "hueptb@vietinbank.vn": "272",
            "ducva@vietinbank.vn": "273",
            "thuln@vietinbank.vn": "274",
            "ph.tuan@vietinbank.vn": "275",
            "linh.nguyentran@vietinbank.vn": "276",
            "saubvb@vietinbank.vn": "277",
            "tuyen.lt@vietinbank.vn": "278",
            "thukt@vietinbank.vn": "279",
            "venvh@vietinbank.vn": "280",
            "tm.tien@vietinbank.vn": "281",
            "hainm@vietinbank.vn": "282",
            "lanptn@vietinbank.vn": "283",
            "binh.duongthanh@vietinbank.vn": "284",
            "tth.nhung@vietinbank.vn": "285",
            "vietvq@vietinbank.vn": "286",
            "letruonggiang@vietinbank.vn": "287",
            "cannm@vietinbank.vn": "288" 
        };
        
        let isLoading = false;

        // Tối ưu hóa: Khởi tạo đơn giản
        const recordCount = Object.keys(SEAT_DATA).length;
        console.log('📊 Đã tải', recordCount, 'bản ghi từ Excel');

        // Xử lý hiển thị/ẩn nút clear
        function toggleClearButton() {
            const emailInput = document.getElementById('email');
            const clearBtn = document.getElementById('clearBtn');
            
            if (emailInput.value.trim()) {
                clearBtn.style.display = 'block';
            } else {
                clearBtn.style.display = 'none';
            }
        }

        // Xóa email
        function clearEmail() {
            const emailInput = document.getElementById('email');
            emailInput.value = '';
            emailInput.focus();
            toggleClearButton();
            
            // Xóa kết quả tra cứu trước đó
            document.getElementById('result').innerHTML = '';
        }

        // Copy email
        function copyEmail(email) {
            navigator.clipboard.writeText(email).then(() => {
                // Điền email vào ô tìm kiếm
                const emailInput = document.getElementById('email');
                emailInput.value = email;
                emailInput.focus();
                toggleClearButton();
                
                // Thông báo ngắn với nút tra cứu ngay
                showResult(`
                    📋 <strong>Đã sao chép và điền email thành công!</strong><br>
                    <div style="margin-top: 15px;">
                        <button onclick="lookupSeat()" style="
                            background: rgb(126, 211, 247);
                            color: rgb(0, 89, 147);
                            padding: 12px 30px;
                            border: none;
                            border-radius: 8px;
                            cursor: pointer;
                            font-size: 16px;
                            font-weight: 600;
                            transition: all 0.3s ease;
                            box-shadow: 0 3px 10px rgba(126, 211, 247, 0.3);
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(126, 211, 247, 0.4)'" 
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 10px rgba(126, 211, 247, 0.3)'">
                            🔍 Tra cứu ngay
                        </button>
                    </div>
                `, 'info');
                
                // Tự động tra cứu sau 1.5 giây nếu người dùng không làm gì
                setTimeout(() => {
                    // Kiểm tra xem email trong input có còn giống email vừa copy không
                    if (document.getElementById('email').value.trim().toLowerCase() === email.toLowerCase()) {
                        lookupSeat();
                    }
                }, 1500);
                
            }).catch(err => {
                console.error('Không thể copy email:', err);
                // Fallback: điền trực tiếp vào ô input
                const emailInput = document.getElementById('email');
                emailInput.value = email;
                emailInput.focus();
                toggleClearButton();
                
                showResult(`
                    📋 <strong>Email đã được điền vào ô tìm kiếm!</strong><br>
                    <div style="margin-top: 15px;">
                        <button onclick="lookupSeat()" style="
                            background: rgb(126, 211, 247);
                            color: rgb(0, 89, 147);
                            padding: 12px 30px;
                            border: none;
                            border-radius: 8px;
                            cursor: pointer;
                            font-size: 16px;
                            font-weight: 600;
                            transition: all 0.3s ease;
                            box-shadow: 0 3px 10px rgba(126, 211, 247, 0.3);
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(126, 211, 247, 0.4)'" 
                        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 10px rgba(126, 211, 247, 0.3)'">
                            🔍 Tra cứu ngay
                        </button>
                    </div>
                `, 'info');
                
                // Tự động tra cứu sau 1.5 giây nếu người dùng không làm gì
                setTimeout(() => {
                    // Kiểm tra xem email trong input có còn giống email vừa copy không
                    if (document.getElementById('email').value.trim().toLowerCase() === email.toLowerCase()) {
                        lookupSeat();
                    }
                }, 1500);
            });
        }

        function lookupSeat() {
            if (isLoading) return;
            
            const emailInput = document.getElementById('email');
            const email = emailInput.value.trim().toLowerCase();
            const searchBtn = document.getElementById('searchBtn');
            
            if (!email) {
                showResult('⚠️ Vui lòng nhập email của bạn!', 'error');
                return;
            }
            
            if (!isValidEmail(email)) {
                showResult('❌ Email không đúng định dạng! Vui lòng kiểm tra lại.', 'error');
                return;
            }
            
            // Hiệu ứng loading
            isLoading = true;
            searchBtn.innerHTML = '<span class="loading"></span>Đang tra cứu...';
            searchBtn.disabled = true;
            
            // Tối ưu hóa: Giảm delay từ 500ms xuống 200ms
            setTimeout(() => {
                const seatCode = SEAT_DATA[email];
                
                if (seatCode) {
                    const isVip = seatCode === 'VIP';
                    const seatClass = isVip ? 'vip' : '';
                    const seatIcon = isVip ? '👑' : '🎫';
                    
                    showResult(`
                        ${seatIcon} <strong>Mã số ghế của đại biểu:</strong><br>
                        <div class="seat-code ${seatClass}">${seatCode}</div>
                    `, 'success');
                } else {
                    // Tối ưu hóa: Tìm kiếm email tương tự nhanh hơn
                    const similarEmails = findSimilarEmails(email);
                    
                    let errorMsg = `❌ <strong>Không tìm thấy email này trong hệ thống!</strong>`;
                    
                    if (similarEmails.length > 0) {
                        errorMsg += `<br><br><strong>🔍 Email tương tự:</strong>`;
                        errorMsg += `<div class="suggestions-container">`;
                        similarEmails.forEach(e => {
                            errorMsg += `
                                <div class="email-suggestion">
                                    <div class="email-text">💡 ${e}</div>
                                    <button class="copy-btn" onclick="copyEmail('${e}')">📋 Copy</button>
                                </div>
                            `;
                        });
                        errorMsg += `</div>`;
                    }
                    
                    showResult(errorMsg, 'error');
                }
                
                // Reset button
                isLoading = false;
                searchBtn.innerHTML = '🔍 Tra cứu ngay';
                searchBtn.disabled = false;
            }, 200);
        }
        
        // Tối ưu hóa: Thuật toán tìm kiếm email tương tự với điều kiện tối thiểu 2 ký tự đầu trùng khớp
        function findSimilarEmails(searchEmail) {
            const [searchUser, searchDomain] = searchEmail.split('@');
            
            // Kiểm tra nếu username có ít nhất 2 ký tự
            if (!searchUser || searchUser.length < 2) {
                return [];
            }
            
            const searchPrefix = searchUser.substring(0, 2).toLowerCase();
            
            return Object.keys(SEAT_DATA).filter(email => {
                const [emailUser, emailDomain] = email.split('@');
                
                // Kiểm tra 2 ký tự đầu của username phải trùng khớp
                if (emailUser.length < 2 || emailUser.substring(0, 2).toLowerCase() !== searchPrefix) {
                    return false;
                }
                
                // Sau khi đã có 2 ký tự đầu trùng khớp, kiểm tra độ tương tự
                return emailUser.includes(searchUser) || 
                       searchUser.includes(emailUser) ||
                       (searchDomain && emailDomain && searchDomain === emailDomain);
            }).slice(0, 3); // Giới hạn tối đa 3 gợi ý
        }
        
        // Tối ưu hóa: Regex đơn giản hơn
        function isValidEmail(email) {
            return /\S+@\S+\.\S+/.test(email);
        }
        
        function showResult(message, type) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `<div class="result ${type}">${message}</div>`;
            
            // Scroll mượt mà
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
        
        // Event listeners tối ưu
        document.getElementById('email').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                lookupSeat();
            }
        });
        
        // Theo dõi thay đổi input để hiển thị nút clear
        document.getElementById('email').addEventListener('input', toggleClearButton);
        
        // Tối ưu hóa: Khởi tạo nhanh hơn
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('email').focus();
        });
    </script>
</body>
</html>
